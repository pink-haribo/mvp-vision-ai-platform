# Dataset Format Strategy: Executive Summary

**ì‘ì„±ì¼:** 2025-01-04
**ìƒíƒœ:** ì„¤ê³„ ì™„ë£Œ, êµ¬í˜„ ëŒ€ê¸°

---

## ğŸ¯ í•µì‹¬ ìš”ì•½ (TL;DR)

### ë¬¸ì œ
- **ê¸°ì¡´ v0.9 í¬ë§·**: ë§ì€ ì‚¬ìš©ìê°€ ì‚¬ìš© ì¤‘ì´ì§€ë§Œ ë¡œì»¬ ì¤‘ì‹¬, í™•ì¥ì„± ë¶€ì¡±
- **ì‹ ê·œ í”Œë«í¼**: Cloud ê¸°ë°˜, ë‹¤ì–‘í•œ íƒœìŠ¤í¬ ì§€ì› í•„ìš”
- **ì œì•½**: ê¸°ì¡´ ì‚¬ìš©ì 100% í•˜ìœ„ í˜¸í™˜ì„± ë³´ì¥ í•„ìˆ˜

### í•´ê²°ì±…
- **v1.0 Platform Format**: ìƒˆë¡œìš´ í†µí•© í¬ë§· (annotations.json)
- **ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜**: v0.9 â†’ v1.0 ìë™ ë³€í™˜
- **3-Tier í˜¸í™˜ì„±**: Native v1.0 / Auto-Migration / Dual-Format

### ê²°ê³¼
âœ… ê¸°ì¡´ ì‚¬ìš©ì: íˆ¬ëª…í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ (ì—…ë¡œë“œë§Œ í•˜ë©´ ìë™ ë³€í™˜)
âœ… ì‹ ê·œ ì‚¬ìš©ì: í˜„ëŒ€ì ì¸ Cloud-native í¬ë§·
âœ… í”Œë«í¼: ëª¨ë“  vision task ì§€ì› ê°€ëŠ¥

---

## ğŸ“Š í¬ë§· ë¹„êµ

| | v0.9 (Legacy) | v1.0 (Platform) |
|---|---|---|
| **êµ¬ì¡°** | summary.json + ê°œë³„ labels/*.json | ë‹¨ì¼ annotations.json |
| **ê²½ë¡œ** | ì ˆëŒ€ ê²½ë¡œ (E:/, C:/) | ìƒëŒ€ ê²½ë¡œ (images/img.jpg) |
| **Task ì§€ì›** | cls, det, seg (3ê°œ) | ëª¨ë“  vision task (10+ ê°œ) |
| **ë©”íƒ€ë°ì´í„°** | ì œí•œì  | í’ë¶€ (ë ˆì´ë¸”ëŸ¬, ë¦¬ë·°ì–´, íƒ€ì„ìŠ¤íƒ¬í”„) |
| **ë²„ì „ ê´€ë¦¬** | âŒ | content_hash, version |
| **Cloud í˜¸í™˜** | âŒ | âœ… R2/S3 ìµœì í™” |
| **í•˜ìœ„ í˜¸í™˜** | N/A | legacy_v09 í•„ë“œë¡œ ë³´ì¡´ |

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ì „ì²´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê¸°ì¡´ ì‚¬ìš©ì (v0.9)                                 â”‚
â”‚  - E:/my-dataset/                                   â”‚
â”‚  - label_map.json + labels/*.json                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ Upload
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend: ìë™ ê°ì§€ & ë³€í™˜                          â”‚
â”‚  - FormatDetector: "v0.9 detected"                 â”‚
â”‚  - V09ToV10Migrator: ìë™ ë³€í™˜                     â”‚
â”‚  - annotations.json ìƒì„±                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  R2 Storage (v1.0 í˜•ì‹)                            â”‚
â”‚  s3://bucket/datasets/user123-my-dataset/          â”‚
â”‚  â”œâ”€â”€ annotations.json         â† v1.0               â”‚
â”‚  â”œâ”€â”€ images/                                       â”‚
â”‚  â””â”€â”€ legacy/                  â† v0.9 ë°±ì—…          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Training: Framework ë³€í™˜                           â”‚
â”‚  - Platform Format â†’ YOLO/ImageFolder/COCO         â”‚
â”‚  - ìºì‹œ í™œìš© (content_hash ê¸°ë°˜)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3-Tier í˜¸í™˜ì„± ëª¨ë¸

#### Tier 1: Native v1.0 (ì‹ ê·œ ì‚¬ìš©ì)
- í”Œë«í¼ ë ˆì´ë¸”ëŸ¬ ì‚¬ìš©
- annotations.json ì§ì ‘ ìƒì„±
- ëª¨ë“  v1.0 ê¸°ëŠ¥ í™œìš© (ë²„ì „ ê´€ë¦¬, í˜‘ì—… ë“±)

#### Tier 2: Auto-Migration (ê¸°ì¡´ ì‚¬ìš©ì)
- v0.9 í¬ë§· ì—…ë¡œë“œ
- ìë™ ë³€í™˜ â†’ v1.0
- legacy_v09 í•„ë“œë¡œ ì›ë³¸ ì •ë³´ ë³´ì¡´

#### Tier 3: Dual-Format Support (í•˜ì´ë¸Œë¦¬ë“œ)
- v1.0 annotations.json ìƒì„±
- legacy/ í´ë”ì— v0.9 ë°±ì—… ìœ ì§€
- ì–‘ë°©í–¥ export ì§€ì› (v1.0 â†” v0.9)

---

## ğŸ“ v1.0 Format í•µì‹¬ ìŠ¤í‚¤ë§ˆ

### annotations.json êµ¬ì¡°

```json
{
  "format_version": "1.0",
  "dataset_id": "user123-cats-dogs",
  "task_type": "image_classification",

  "created_at": "2025-01-15T10:00:00Z",
  "version": 3,
  "content_hash": "sha256:abc123...",

  "migration_info": {
    "migrated_from": "v0.9",
    "original_paths": {...}
  },

  "classes": [
    {"id": 0, "name": "cat", "color": "#FF6B6B"}
  ],

  "images": [
    {
      "id": 1,
      "file_name": "img001.jpg",
      "annotation": {...},
      "metadata": {
        "labeled_by": "user123",
        "reviewed_by": "admin"
      },
      "legacy_v09": {...}  // ì›ë³¸ v0.9 ì •ë³´ ë³´ì¡´
    }
  ]
}
```

### Taskë³„ Annotation

| Task | v0.9 | v1.0 |
|------|------|------|
| **Classification** | `shapes[0].label` | `annotation.class_name` |
| **Detection** | `shapes[].points: [[x1,y1], [x2,y2]]` | `annotations[].bbox: [x, y, w, h]` |
| **Segmentation** | `shapes[].points: [[x1,y1], ...]` | `annotations[].segmentation: [x1,y1,x2,y2,...]` |
| **Pose** | âŒ ë¯¸ì§€ì› | `annotations[].keypoints: [[x,y,v], ...]` |
| **Super-Resolution** | âŒ ë¯¸ì§€ì› | `annotation.hr_image: "path"` |

---

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ í”„ë¡œì„¸ìŠ¤

### ì‚¬ìš©ì ê´€ì 

```
1. ê¸°ì¡´ v0.9 ë°ì´í„°ì…‹ ì••ì¶•
   zip -r my-dataset.zip images/ labels/ label_map.json

2. í”Œë«í¼ ì—…ë¡œë“œ
   ì›¹ UIì—ì„œ ë“œë˜ê·¸ ì•¤ ë“œë¡­

3. ìë™ ê°ì§€ & ë³€í™˜
   "v0.9 í¬ë§·ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. v1.0ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤."
   âœ… ìë™ ë³€í™˜ (3-5ì´ˆ)

4. í•™ìŠµ ì‹œì‘
   ë°”ë¡œ í•™ìŠµ ê°€ëŠ¥ (ë³€í™˜ëœ v1.0 í¬ë§· ì‚¬ìš©)
```

### ê°œë°œì ê´€ì 

```python
# 1. Format Detection
format = detect_dataset_format(uploaded_files)
# â†’ "platform_v0.9"

# 2. Migration
migrator = V09ToV10Migrator()
annotations_v10 = migrator.migrate(uploaded_files)

# 3. Upload to R2
upload_to_r2(
    dataset_id="user123-my-dataset",
    annotations=annotations_v10,
    legacy_backup=uploaded_files  # v0.9 ë°±ì—…
)

# 4. DB Update
db.datasets.create(
    id="user123-my-dataset",
    format="platform",
    task_type="object_detection",
    content_hash=calc_hash(annotations_v10)
)
```

---

## âœ… ì¥ì 

### 1. ê¸°ì¡´ ì‚¬ìš©ìì—ê²Œ
- âœ… **íˆ¬ëª…í•œ ë§ˆì´ê·¸ë ˆì´ì…˜**: ì—…ë¡œë“œë§Œ í•˜ë©´ ìë™ ë³€í™˜
- âœ… **ì •ë³´ ë³´ì¡´**: legacy_v09 í•„ë“œë¡œ ì›ë³¸ ì •ë³´ ìœ ì§€
- âœ… **ì–‘ë°©í–¥ export**: í•„ìš”ì‹œ v0.9ë¡œ ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥
- âœ… **ì ì§„ì  ì „í™˜**: ë¡œì»¬ íˆ´ ê³„ì† ì‚¬ìš© ê°€ëŠ¥

### 2. í”Œë«í¼ì—ê²Œ
- âœ… **í™•ì¥ ê°€ëŠ¥**: ìƒˆ íƒœìŠ¤í¬ ì¶”ê°€ ìš©ì´ (Pose, Super-Resolution ë“±)
- âœ… **Cloud ìµœì í™”**: ìƒëŒ€ ê²½ë¡œ, ë‹¨ì¼ íŒŒì¼
- âœ… **í˜‘ì—… ì§€ì›**: ë ˆì´ë¸”ëŸ¬, ë¦¬ë·°ì–´ ì •ë³´
- âœ… **ë²„ì „ ê´€ë¦¬**: content_hashë¡œ ë³€ê²½ ê°ì§€

### 3. ê°œë°œíŒ€ì—ê²Œ
- âœ… **ë‹¨ìˆœí™”**: í•˜ë‚˜ì˜ annotations.jsonë§Œ íŒŒì‹±
- âœ… **í‘œì¤€í™”**: COCO í¬ë§· í˜¸í™˜
- âœ… **ìœ ì§€ë³´ìˆ˜**: ì¤‘ì•™í™”ëœ ìŠ¤í‚¤ë§ˆ
- âœ… **í…ŒìŠ¤íŠ¸**: ëª…í™•í•œ ë³€í™˜ ë¡œì§

---

## ğŸ“‹ êµ¬í˜„ ê³„íš

### Phase 1: Core Migration (1ì£¼)
- [ ] FormatDetector êµ¬í˜„
- [ ] V09ToV10Migrator êµ¬í˜„ (cls, det, seg)
- [ ] Backend API í†µí•©
- [ ] Unit tests

### Phase 2: UI/UX (3ì¼)
- [ ] Upload UI ê°œì„  (í¬ë§· ê°ì§€ ì•ˆë‚´)
- [ ] Migration Report (ë³€í™˜ ê²°ê³¼)
- [ ] Legacy Backup ë‹¤ìš´ë¡œë“œ

### Phase 3: Advanced Features (1ì£¼)
- [ ] V10ToV09Exporter (ì–‘ë°©í–¥ ë™ê¸°í™”)
- [ ] Sync API
- [ ] CLI Tool (ì˜¤í”„ë¼ì¸ ë§ˆì´ê·¸ë ˆì´ì…˜)

### Phase 4: Documentation (3ì¼)
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ
- [ ] ë¹„ë””ì˜¤ íŠœí† ë¦¬ì–¼
- [ ] FAQ

**Total: ì•½ 3ì£¼**

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

1. **[PLATFORM_DATASET_FORMAT.md](./PLATFORM_DATASET_FORMAT.md)**
   ì „ì²´ í¬ë§· ìŠ¤í™, í•˜ìœ„ í˜¸í™˜ì„± ì „ëµ, êµ¬í˜„ ê³„íš (120í˜ì´ì§€)

2. **[MIGRATION_EXAMPLES.md](./MIGRATION_EXAMPLES.md)**
   ì‹¤ì œ ë³€í™˜ ì˜ˆì‹œ (Classification, Detection, Segmentation)

3. **[example-v1.0-classification.json](./example-v1.0-classification.json)**
   v1.0 í¬ë§· ì˜ˆì‹œ (Classification)

4. **[example-v1.0-detection.json](./example-v1.0-detection.json)**
   v1.0 í¬ë§· ì˜ˆì‹œ (Object Detection)

5. **[label-example-*.json](./label-example-classification.json)**
   ê¸°ì¡´ v0.9 í¬ë§· ì˜ˆì‹œ

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ ì‹œì‘ ê°€ëŠ¥
1. **FormatDetector êµ¬í˜„** (1ì¼)
   - `mvp/backend/app/utils/format_detector.py`
   - v0.9, v1.0, YOLO, COCO, ImageFolder ê°ì§€

2. **V09ToV10Migrator êµ¬í˜„** (3ì¼)
   - `mvp/backend/app/utils/dataset_migrator.py`
   - Classification, Detection, Segmentation ë³€í™˜

3. **Backend API í†µí•©** (2ì¼)
   - `POST /datasets/upload` ìˆ˜ì •
   - ìë™ ê°ì§€ ë° ë³€í™˜ ë¡œì§

### ê²€ì¦ í•„ìš”
- [ ] ê¸°ì¡´ ì‚¬ìš©ì ë°ì´í„°ì…‹ ìƒ˜í”Œ ìˆ˜ì§‘ (3-5ê°œ)
- [ ] ì‹¤ì œ ë³€í™˜ í…ŒìŠ¤íŠ¸
- [ ] Edge case í™•ì¸ (ê¹¨ì§„ ë ˆì´ë¸”, ëˆ„ë½ëœ íŒŒì¼ ë“±)

---

## â“ FAQ

**Q: ê¸°ì¡´ v0.9 ë°ì´í„°ì…‹ì„ ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?**
A: ì˜ˆ! í”Œë«í¼ ì—…ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ v1.0ìœ¼ë¡œ ë³€í™˜ë˜ë©°, legacy/ í´ë”ì— ì›ë³¸ì´ ë°±ì—…ë©ë‹ˆë‹¤.

**Q: ë¡œì»¬ AI ê²€ì‚¬ íˆ´ì„ ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?**
A: ì˜ˆ! ë¡œì»¬ì—ì„œ v0.9ë¡œ ì‘ì—… í›„ í”Œë«í¼ ì—…ë¡œë“œ ì‹œ ìë™ ë³€í™˜ë©ë‹ˆë‹¤. ë˜ëŠ” í”Œë«í¼ì—ì„œ v0.9ë¡œ ë‹¤ì‹œ export ê°€ëŠ¥í•©ë‹ˆë‹¤.

**Q: ë³€í™˜ ê³¼ì •ì—ì„œ ì •ë³´ê°€ ì†ì‹¤ë˜ë‚˜ìš”?**
A: ì•„ë‹ˆìš”! ëª¨ë“  v0.9 ì •ë³´ëŠ” `legacy_v09` í•„ë“œì— ë³´ì¡´ë©ë‹ˆë‹¤.

**Q: ìƒˆë¡œìš´ íƒœìŠ¤í¬ (Pose, Super-Resolution)ë¥¼ ì§€ì›í•˜ë‚˜ìš”?**
A: ì˜ˆ! v1.0ì€ ëª¨ë“  vision taskë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

**Q: ë³€í™˜ì— ì‹œê°„ì´ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?**
A: 1000ì¥ ê¸°ì¤€ ì•½ 3-5ì´ˆì…ë‹ˆë‹¤. (ì—…ë¡œë“œ ì‹œê°„ ì œì™¸)

---

**Last Updated:** 2025-01-04
**Version:** 1.0
**Status:** âœ… Design Complete, Ready for Implementation
