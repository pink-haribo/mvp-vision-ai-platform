# ================================
# Vision AI Platform - Environment Variables
# ================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to git!

# ================================
# LLM API Keys
# ================================
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-xxx

# Get from: https://platform.openai.com/
OPENAI_API_KEY=sk-xxx

# Which LLM to use for intent parsing
LLM_PROVIDER=anthropic  # or 'openai'
LLM_MODEL=claude-3-5-sonnet-20241022  # or 'gpt-4-turbo'

# ================================
# Database - PostgreSQL
# ================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=vision_platform
DATABASE_USER=admin
DATABASE_PASSWORD=devpass

# Full connection string (alternative to above)
DATABASE_URL=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}

# Connection pool settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# ================================
# Database - MongoDB
# ================================
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_NAME=vision_platform

# Full connection string
MONGODB_URL=mongodb://${MONGODB_HOST}:${MONGODB_PORT}/${MONGODB_NAME}

# ================================
# Database - Redis
# ================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Full connection string
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ================================
# Object Storage (S3 / MinIO)
# ================================
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=vision-platform-dev
S3_REGION=us-east-1

# MinIO credentials (for local development)
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin

# For production, use real AWS credentials
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# ================================
# Temporal (Workflow Engine)
# ================================
TEMPORAL_HOST=localhost
TEMPORAL_PORT=7233
TEMPORAL_NAMESPACE=default

TEMPORAL_URL=${TEMPORAL_HOST}:${TEMPORAL_PORT}

# ================================
# Authentication & Security
# ================================
# Generate with: openssl rand -hex 32
JWT_SECRET=change-this-to-a-random-secret-key-in-production

JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=30

# Password hashing
BCRYPT_ROUNDS=12

# ================================
# API Configuration
# ================================
# Backend API
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# API Gateway (Kong)
API_GATEWAY_URL=http://localhost:8000

# Enable/disable features
API_DEBUG=true
API_RELOAD=true

# ================================
# Frontend
# ================================
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1
NEXT_PUBLIC_WS_URL=ws://localhost:8000/ws
NEXT_PUBLIC_ENVIRONMENT=development

# ================================
# Service Ports
# ================================
# Each backend service runs on a different port
INTENT_PARSER_PORT=8001
ORCHESTRATOR_PORT=8002
MODEL_REGISTRY_PORT=8003
DATA_SERVICE_PORT=8004
VM_CONTROLLER_PORT=8005
TELEMETRY_PORT=8006

# ================================
# Kubernetes
# ================================
# For local development with minikube/kind
KUBECONFIG=~/.kube/config
K8S_NAMESPACE=training

# For production
# K8S_CLUSTER_ENDPOINT=https://xxx.eks.amazonaws.com
# K8S_TOKEN=xxx

# ================================
# Training Configuration
# ================================
# Default resource limits
DEFAULT_GPU_COUNT=1
DEFAULT_MEMORY_GB=16
DEFAULT_CPU_CORES=4

# Training timeout (hours)
TRAINING_TIMEOUT_HOURS=24

# Checkpoint settings
CHECKPOINT_INTERVAL_EPOCHS=10
AUTO_SAVE_BEST=true

# ================================
# Telemetry & Monitoring
# ================================
# Prometheus
PROMETHEUS_URL=http://localhost:9090
PROMETHEUS_RETENTION_DAYS=15

# Grafana
GRAFANA_URL=http://localhost:3001
GRAFANA_ADMIN_PASSWORD=admin

# Application metrics
ENABLE_METRICS=true
METRICS_PORT=9100

# ================================
# Logging
# ================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text

# Log to file
LOG_TO_FILE=false
LOG_FILE_PATH=./logs/app.log

# ================================
# Email (Optional)
# ================================
# For notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@vision-platform.com

# ================================
# Rate Limiting
# ================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ================================
# Celery (Background Tasks)
# ================================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json

# ================================
# External Services (Optional)
# ================================
# Sentry (Error tracking)
SENTRY_DSN=

# Analytics
GOOGLE_ANALYTICS_ID=

# Slack notifications
SLACK_WEBHOOK_URL=

# ================================
# Development Tools
# ================================
# Hot reload
WATCHFILES_FORCE_POLLING=false

# Debug mode
DEBUG=true

# Allow CORS from these origins
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ================================
# Testing
# ================================
TEST_DATABASE_URL=postgresql://admin:devpass@localhost:5432/vision_platform_test
TEST_MONGODB_URL=mongodb://localhost:27017/vision_platform_test
TEST_REDIS_URL=redis://localhost:6379/1

# ================================
# Feature Flags
# ================================
FEATURE_CHAT_INTERFACE=true
FEATURE_AUTO_AUGMENTATION=true
FEATURE_DISTRIBUTED_TRAINING=false
FEATURE_COST_ESTIMATION=true

# ================================
# Misc
# ================================
TZ=UTC
ENVIRONMENT=development  # development, staging, production
