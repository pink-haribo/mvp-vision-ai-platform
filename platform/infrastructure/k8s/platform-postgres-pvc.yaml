apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: platform-postgres-pvc
  namespace: platform
  labels:
    app: platform-postgres
    tier: database
    component: platform-db
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi  # Platform DB: projects, datasets, training jobs, etc.
  storageClassName: standard  # Change based on cloud provider (gp3, pd-ssd, etc.)
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: platform-postgres-pv
  labels:
    app: platform-postgres
    tier: database
    component: platform-db
spec:
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain  # Data preserved even if PVC is deleted
  storageClassName: standard
  # For cloud providers, use dynamic provisioning instead of hostPath
  # hostPath:
  #   path: /mnt/data/platform-postgres
  #   type: DirectoryOrCreate
