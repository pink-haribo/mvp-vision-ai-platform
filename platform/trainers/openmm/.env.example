# OpenMMLab Trainer Environment Variables

# ============================================================================
# Required Variables
# ============================================================================

# Backend API callback URL
CALLBACK_URL=http://localhost:8000

# Training job ID
JOB_ID=123

# Task type (detection, segmentation, pose)
TASK_TYPE=detection

# Model name (e.g., faster-rcnn-r50, yolox-s, rtmdet-m)
MODEL_NAME=faster-rcnn-r50

# Dataset information
DATASET_ID=ds_abc123
SNAPSHOT_ID=snap_xyz789
DATASET_VERSION_HASH=1bb25f37a8c9d2e4f5g6h7i8j9k0l1m2

# ============================================================================
# Storage Configuration
# ============================================================================

# External Storage (Datasets)
EXTERNAL_STORAGE_ENDPOINT=http://localhost:9000
EXTERNAL_STORAGE_ACCESS_KEY=minioadmin
EXTERNAL_STORAGE_SECRET_KEY=minioadmin
EXTERNAL_BUCKET_DATASETS=training-datasets

# Internal Storage (Checkpoints/Results)
INTERNAL_STORAGE_ENDPOINT=http://localhost:9002
INTERNAL_STORAGE_ACCESS_KEY=minioadmin
INTERNAL_STORAGE_SECRET_KEY=minioadmin
INTERNAL_BUCKET_CHECKPOINTS=training-checkpoints

# ============================================================================
# Training Configuration
# ============================================================================

# Training config (JSON format)
CONFIG={"basic": {"epochs": 12, "batch": 2, "lr0": 0.02, "optimizer": "SGD", "device": "0", "workers": 4}, "advanced": {"mosaic": false, "mixup": false, "amp": false}}

# Advanced config (alternative to CONFIG.advanced)
ADVANCED_CONFIG={"mosaic": false, "mixup": false, "amp": false}

# ============================================================================
# Dataset Caching (Optional)
# ============================================================================

# Dataset cache directory
DATASET_CACHE_DIR=/tmp/datasets

# Max cache size in GB
DATASET_CACHE_MAX_GB=50

# ============================================================================
# Callback Configuration (Optional)
# ============================================================================

# Max callback retries
CALLBACK_MAX_RETRIES=3

# Callback retry delay (seconds)
CALLBACK_RETRY_DELAY=2.0

# ============================================================================
# Inference Configuration (for predict.py)
# ============================================================================

# Checkpoint S3 URI
CHECKPOINT_PATH=s3://training-checkpoints/checkpoints/123/best.pth

# Test images S3 URI
IMAGES_PATH=s3://test-images/batch-001/

# Confidence threshold
CONFIDENCE_THRESHOLD=0.25

# ============================================================================
# Export Configuration (for export.py)
# ============================================================================

# Export format (onnx, torchscript, tensorrt)
EXPORT_FORMAT=onnx

# Export config (JSON format)
EXPORT_CONFIG={"opset_version": 17, "input_shape": [1, 3, 640, 640], "dynamic_axes": true}

# ============================================================================
# ClearML Integration (Optional)
# ============================================================================

# ClearML server URL
CLEARML_API_HOST=https://api.clear.ml
CLEARML_WEB_HOST=https://app.clear.ml
CLEARML_FILES_HOST=https://files.clear.ml

# ClearML credentials
CLEARML_API_ACCESS_KEY=your_access_key
CLEARML_API_SECRET_KEY=your_secret_key

# ClearML project
CLEARML_PROJECT_NAME=vision-ai-platform
CLEARML_TASK_NAME=training-job-123

# ============================================================================
# MMDetection Specific (Optional)
# ============================================================================

# CUDA device
CUDA_VISIBLE_DEVICES=0

# Number of GPUs
WORLD_SIZE=1

# PyTorch distributed
MASTER_ADDR=localhost
MASTER_PORT=29500
RANK=0

# ============================================================================
# Logging (Optional)
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Python unbuffered output
PYTHONUNBUFFERED=1
